Урок 6. Сетевая безопасность в мобильных сетях

В KaliLinux запустить прокси сервер squid без запрещающих правил, в браузере прописать прокси http://127.0.0.1:3128. Запустить сервер ssh в Kali Linux, выполнить подключение по ssh из вашей хостовой машины (Windows, MacOS) к Kali Linux. Внутри сеанса ssh запустить захват при помощи tcpdump трафика всех интерфейсов в файл, вернуться в Kali Linux, открыть сайт gb.ru в браузере. Закончить захват трафика (ctrl+c), скачать файл захвата на хостовую машину и открыть в WireShark. Убедиться, что в захваченном трафике видно, что соединение идет через прокси (есть http запрос CONNECT с именем сайта к прокси).

В качестве решения приложить:
— файл с захваченным трафиком
— скриншот выполнения tcpdump по ssh
— скриншот анализа файла с трафиком, где виден http-запрос CONNECT к gb.ru.


Решение:

1. Закомментируем изменения в squid, сделанные на предыдущем занятии.
<image src="clean_squid.png">

2. Пропишем в браузере на Kali proxy-server 127.0.0.1:3128

3. Запустим ssh-сервер на виртуальной машине с Kali
<image src="start_ssh.png">

4. Подключимся к виртуальной Kali с хостовой машине под управлением Windows 10, внутри сеанса ssh запустим tcpdump (sudo tcpdump -i any -w traffic.pcap) и на виртуальной системе откроем сайт gb.ru. 
<image src="gb.ru_opened.png">

5. После окаончания загрузки сайта остановим захват трафика в терминале.
<image src="tcpdump_finish.png">

6. Передадим файл с дампом на реальную (хостовую машину) и проведем анализ захваченного трафика с помощью WireShark. В ходе анализа видим, что подключение к сайту gb.ru шло через наш proxy-сервер (127.0.0.1:3128)
<image src="wireshark_info.png">

3. Приложение - отчет по результатам сканирования.
Файл: traffic.pcap